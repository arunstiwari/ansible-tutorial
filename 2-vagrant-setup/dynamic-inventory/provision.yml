---
  - name: Provision a vagrant machine
    hosts: localhost
    connection: local
    vars:
      box: ubuntu/xenial64
    tasks:
      - name: Create a Vagrantfile
        command: vagrant init {{ box }} creates=Vagrantfile
        
      - name: Bring up  a vagrant machine
        command: vagrant up
      
      - name: Add the vagrant machine to the inventory
        add_host: >
            name=vagrant
            ansible_host=127.0.0.1
            ansible_port=2225
            ansible_user=vagrant
            ansible_private_key_file=/Users/arun/.vagrant.d/insecure_private_key
